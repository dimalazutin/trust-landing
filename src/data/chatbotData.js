// src/data/chatbotData.js

export const chatbotResponses = {
  // 1. About the platform
  "what is trustconstruct": "TrustConstruct is a modern platform for secure interactions between clients and contractors based on milestone contracts and escrow payments. It helps prevent fraud, ensures transparency, and protects both parties' interests.",
  "trustconstruct": "TrustConstruct is a modern platform for secure interactions between clients and contractors based on milestone contracts and escrow payments. It helps prevent fraud, ensures transparency, and protects both parties' interests.",
  "who can use trustconstruct": "The platform is open to everyone: private clients, contractors, designers, builders, engineers, and even small companies.",
  "is trustconstruct only for construction": "The platform is designed for construction, renovation, engineering, and related projects. Other industries may be supported in the future.",
  "is trustconstruct free": "The platform is free for clients. Contractors only pay a small commission on successfully completed projects. No lead fees or prepayments.",
  "is it free": "The platform is free for clients. Contractors only pay a small commission on successfully completed projects. No lead fees or prepayments.",
  "free": "Yes! The platform is free for clients. Contractors only pay a small commission on successfully completed projects.",
  "where is trustconstruct available": "TrustConstruct currently operates throughout the United States. Support for other countries will be added in the future.",
  "is trustconstruct for commercial projects": "Yes, you can post both residential and commercial projects of any scale.",
  "is trustconstruct for small jobs": "The platform is perfect for projects of any size - from small repairs to large construction.",

  // 2. Benefits and differences
  "why use trustconstruct": "The platform protects both parties' money through escrow, ensures fair contracts, and transparency at all stages. It's safer than working directly.",
  "what makes trustconstruct unique": "We don't sell leads, impose paid subscriptions, or charge commission for failed deals. Only fair payment for results.",
  "how is trustconstruct better than thumbtack": "Unlike Thumbtack, we have no paid leads or fake requests. You only pay for completed orders, and your money is always protected by escrow.",
  "how is trustconstruct better than angi": "Angi doesn't protect money or offer convenient milestone contracts. TrustConstruct sets new standards of trust and transparency in the market.",
  "is trustconstruct safer than direct deals": "Yes. Money is always held in an escrow account and transferred to the contractor only after work completion. You're protected at every stage.",
  "does trustconstruct have a rating system": "Yes, we have an open rating system based on real completed projects and reviews.",

  // 3. Registration and profile
  "how do i register": "Click Sign Up on the main page, choose account type (client or contractor) and fill out the form. Registration takes a couple of minutes.",
  "register": "Click Sign Up on the main page, choose account type (client or contractor) and fill out the form. Registration takes a couple of minutes.",
  "how do i get started": "Click Sign Up on the main page, choose account type (client or contractor) and fill out the form. Registration takes a couple of minutes.",
  "get started": "Click Sign Up on the main page, choose account type (client or contractor) and fill out the form. Registration takes a couple of minutes.",
  "can a company sign up": "Yes, legal entities and sole proprietors can create contractor profiles.",
  "what documents do i need": "Contractors need licenses, insurance, and basic company information. Clients only need email and phone number.",
  "can i change my account type": "Yes, you can add a contractor or client role in your profile settings.",

  // 4. Escrow, security, and guarantees
  "what is escrow": "Escrow is a secure money storage service. Funds are locked until milestone completion and automatically transfer to the contractor after result approval.",
  "escrow": "Escrow is a secure money storage service. Funds are locked until milestone completion and automatically transfer to the contractor after result approval.",
  "how does escrow work": "After contract signing, the client deposits payment for the milestone into the escrow account. The contractor receives money only after result approval.",
  "how do escrow payments work": "After contract signing, the client deposits payment for the milestone into the escrow account. The contractor receives money only after result approval.",
  "is my money safe": "Yes, TrustConstruct partners with certified escrow providers. Your funds are protected at every stage of the deal.",
  "money safe": "Yes, TrustConstruct partners with certified escrow providers. Your funds are protected at every stage of the deal.",
  "can i get a refund": "If work isn't completed, money returns to the client. All disputes are resolved through an independent expert.",
  "are card payments secure": "Yes, all payments go through secure channels and PCI DSS-certified payment systems.",

  // 5. Milestones
  "what is a milestone contract": "A milestone contract is an agreement divided into stages. Each stage is paid separately after client acceptance.",
  "how many milestones can i set": "You can agree on any number of stages for maximum control.",
  "can i change milestones later": "Milestones can only be changed by mutual agreement through contract re-signing.",
  "who approves milestones": "The client confirms each stage. Only then does the contractor receive payment.",
  "what if a milestone is delayed": "Parties can agree to reschedule. If there's no agreement, the standard dispute procedure applies.",

  // 6. Costs, rates, and fees
  "what are the fees": "Free for clients. Contractors pay commission only on actually completed and paid projects.",
  "are there hidden fees": "No hidden charges or mandatory subscriptions. All fees are visible upfront.",
  "do you charge for disputes": "Standard dispute review is free. Expert assessment may be paid in complex cases (cost fixed in advance).",
  "when do i pay platform fees": "Commission is automatically deducted after each milestone completion.",

  // 7. For contractors
  "how do i get projects": "Complete your profile and bid on suitable projects. The higher your rating, the more orders you get.",
  "can i bring my own clients": "Yes, you can invite your clients and work with them through TrustConstruct on favorable terms.",
  "how do i get paid": "You receive money immediately after the client confirms the milestone - instantly to your card or bank account.",
  "how do i improve my rating": "Complete projects on time, maintain communication with clients, and collect good reviews.",
  "do i need insurance": "Many types of work require current insurance. Insurance information is displayed in your profile.",

  // 8. For clients
  "how do i post a project": "Create an order in your dashboard: describe the task, timeline, budget, and wait for contractor responses.",
  "can i invite my contractor": "Yes, you can send an invitation to a contractor and work through TrustConstruct.",
  "how do i compare bids": "In your dashboard, you'll see all contractor proposals, their ratings, portfolios, and reviews.",
  "can i see contractor insurance": "Yes, all information about contractor licenses and insurance is available in their profile.",
  "can i leave a review": "After project completion, you can leave a detailed review visible to other clients.",

  // 9. Disputes, support, moderation
  "how do i open a dispute": "If a dispute arises, open a ticket in the Disputes section and describe the problem. We'll contact both parties to find a solution.",
  "who mediates disputes": "Our independent experts assess the situation based on the contract, chat, and provided documents.",
  "how long do disputes take": "Most disputes are resolved within 1-3 days. Complex cases require expert assessment.",
  "is mediation free": "Standard review is free. Additional expertise comes at a separate cost.",
  "can i appeal a decision": "You can file an appeal. We'll review additional evidence.",

  // 10. Documents, integrations
  "can i export invoices": "All invoices and payment documents can be downloaded as PDF in your dashboard.",
  "are contracts legally binding": "Yes, our smart contracts have legal force and can be used in court.",
  "can i use e-signature": "Yes, electronic signature is supported for all contracts.",
  "do you provide templates": "Yes, standard contract templates are available on the platform for various types of work.",

  // 11. Support, contacts, mobile version
  "how do i contact support": "Write to online chat on the website, email support@thetrustconstruct.com, or use the feedback form.",
  "is there phone support": "Yes, support phone number is listed in the website footer. We're always available.",
  "is there a mobile app": "Mobile website version is currently available. iOS and Android apps coming soon.",
  "what browsers are supported": "The platform works in all modern browsers: Chrome, Safari, Firefox, Edge.",

  // 12. General questions
  "thank you": "You're welcome! If you have more questions, feel free to ask.",
  "thanks": "Thank you for your interest in TrustConstruct! We're always happy to help.",
  "goodbye": "Goodbye! Wishing you successful projects and trust in all matters.",
  "bye": "See you later! Have a great day!",
  "ok": "Great! Is there anything else I can help you with?",
  "yes": "Perfect! What would you like to know?",
  "no": "No problem! Feel free to ask if you need anything else."
}

// Categories for suggested questions
export const questionCategories = {
  "Getting Started": [
    "What is TrustConstruct?",
    "How do I register?",
    "Is TrustConstruct free?",
    "Who can use TrustConstruct?"
  ],
  "How It Works": [
    "What is escrow?",
    "What is a milestone contract?",
    "How do escrow payments work?",
    "Is my money safe?"
  ],
  "For Contractors": [
    "How do I get projects?",
    "How do I get paid?",
    "What are the fees?",
    "Do I need insurance?"
  ],
  "For Clients": [
    "How do I post a project?",
    "How do I compare bids?",
    "Can I invite my contractor?",
    "Can I get a refund?"
  ],
  "Support & Help": [
    "How do I contact support?",
    "How do I open a dispute?",
    "Is there a mobile app?",
    "Can I leave a review?"
  ]
}

// Popular questions for quick access
export const popularQuestions = [
  "What is TrustConstruct?",
  "How does escrow work?",
  "Is it free?",
  "How do I get started?",
  "Is my money safe?"
]

export const unknownQuestions = []
export const userContacts = []

// Enhanced search function with fuzzy matching
export function findResponse(msg) {
  const cleaned = msg.trim().toLowerCase()
    .replace(/\?/g, '') // Remove question marks
    .replace(/[.,!;]/g, '') // Remove punctuation
    .replace(/\s+/g, ' ') // Normalize spaces
  
  // Direct match
  if (chatbotResponses[cleaned]) {
    return chatbotResponses[cleaned]
  }
  
  // Try variations
  const variations = [
    cleaned,
    cleaned.replace(/^(what is|what's|whats) /, ''),
    cleaned.replace(/^(how do i|how to|how can i) /, ''),
    cleaned.replace(/^(is it|is there|are there) /, ''),
    cleaned.replace(/^(can i|can you|could i|could you) /, '')
  ]
  
  for (const variant of variations) {
    if (chatbotResponses[variant]) {
      return chatbotResponses[variant]
    }
  }
  
  // Keyword matching
  const keywords = cleaned.split(' ').filter(word => word.length > 2)
  let bestMatch = null
  let bestScore = 0
  
  for (const [key, response] of Object.entries(chatbotResponses)) {
    let score = 0
    let matchedKeywords = 0
    
    for (const keyword of keywords) {
      if (key.includes(keyword)) {
        score += keyword.length * 2 // Weight by keyword length
        matchedKeywords++
      }
    }
    
    // Bonus for matching multiple keywords
    if (matchedKeywords > 1) {
      score *= matchedKeywords
    }
    
    if (score > bestScore) {
      bestScore = score
      bestMatch = response
    }
  }
  
  // Return best match if score is high enough
  if (bestScore > 8 && bestMatch) {
    return bestMatch
  }
  
  // Default response
  return "I'm not sure I understand your question. Could you please rephrase it or choose from the suggested topics? You can also leave your contact information and our team will get back to you with a detailed answer."
}